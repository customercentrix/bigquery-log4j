{"name":"Bigquery-log4j2","tagline":"","body":"## About\r\nBigquery-Log4j2 is a Java project for streaming logs to BigQuery. It uses Log4j to define the BigQueryAppender that processes the log messages.\r\n\r\n## Setting Up\r\nBefore you start you need to make the following changes:\r\n\r\n1. Open `BigQueryUtils.java` and change the `DATASET_ID`, `PROJECT_ID`, and `SERVICE_ACCOUNT_EMAIL` to your projects value.\r\n\r\n2. Generate a `key.p12` file from within the Google Developer console.\r\n\r\n3. Place the `key.p12` file inside of the `bigquery-log4j` folder.\r\n\r\n\r\n## Getting Started\r\nThe simplest way to verify Bigquery and Log4j2 are working is to run the `Log4jTests.java` unit test. If the test completes successfully then you can visit the BigQuery console and run queries. \r\n\r\nFollow the steps below to start streaming log messages from your project:\r\n\r\n1. Configure your project to use [Log4j2](http://logging.apache.org/log4j/2.x/) by adding the appropriate jars\r\n\r\n  a. Maven Dependencies for Log4j2 \r\n\r\n\t\t<dependency>\t\r\n\t\t\t<groupId>org.apache.logging.log4j</groupId>\r\n\t\t\t<artifactId>log4j-api</artifactId>\r\n\t\t\t<version>2.0.1</version>\r\n\t\t</dependency>\r\n\t\t<dependency>\r\n\t\t\t<groupId>org.apache.logging.log4j</groupId>\r\n\t\t\t<artifactId>log4j-core</artifactId>\r\n\t\t\t<version>2.0.1</version>\r\n\t\t</dependency>\r\n\r\n\r\n2. Copy the `log4j2.xml` file into the source folder or enter the following values into your own version:\r\n\r\n  a. Within `<Apenders>` enter\r\n\r\n        <BigQueryAppender name=\"BIGQUERY\">        \r\n        </BigQueryAppender>\r\n\r\n  b. Within `<Loggers>` enter. View [Logger Levels](http://logging.apache.org/log4j/2.x/manual/architecture.html#LoggerConfig) for more info.\r\n\r\n        <Root level=\"DEBUG\">\r\n            <AppenderRef ref=\"BIGQUERY\" />\r\n        </Root>\r\n\r\n3. Add the `BigQueryAppender.java` to your project.\r\n\r\n4. Now you can start logging by calling `LogManager.getLogger(CURRENT_CLASS.class);` to retrieve the logger.\r\n\r\n## Troubleshooting\r\nIf your logs are not being sent and/or there are BigQuery exceptions then there is a good chance your table has not been setup correctly. The easiest way to fix this is to run `BigQueryRefresher.java` which will delete the table and recreate it.","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}